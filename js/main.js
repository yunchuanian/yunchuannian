// 小说数据
const storiesData = {
    // 珣的故事
    'xun-main-1': {
        title: '第一章·梦境回廊',
        content: `
            <h3>第一章·梦境回廊</h3>
            <p>珣第一次意识到自己与众不同，是在十二岁那年的夏天...</p >
            <p>那是一个闷热的午后，蝉鸣声穿透纱窗，珣躺在竹席上昏昏欲睡。朦胧间，他感觉自己的意识开始漂浮，就像被风吹起的一片羽毛，轻飘飘地离开了身体。</p >
            <p>当他再次"睁开"眼睛时，发现自己站在一片陌生的花园里。这里的花草都泛着淡淡的蓝光，空气中飘荡着若有若无的香气。</p >
        `
    },
    'xun-main-2': {
        title: '第二章·记忆碎片',
        content: `
            <h3>第二章·记忆极碎片</h3>
            <p>珣开始了寻找失落记忆的旅程...</p >
            <p>梦境回廊中的每一面镜子都映照着他过去的片段，有些清晰，有些模糊。</p >
        `
    },
    'xun-main-3': {
        title: '第三章·命运交织',
        content: `
            <h3>第三章·命运交织</h3>
            <p>在梦境的最深处，珣遇到了颜愈君...</p >
            <p>这位神秘的梦境旅人似乎知道很多关于珣的秘密。</p >
        `
    },
    'xun-extra-1': {
        title: '1.童年往事',
        content: `
            <h3>1.童年往事.蛋糕</h3>
            <p>她小小一个，缩在角落里，什么也听不到，什么也做不到。</p >
            <p> 父母的棍棒落在她的身上，没有一丝犹豫，也没有一刻停歇。</p >
            <p>桌上的蛋糕显得这场闹剧格外讽刺</p >
            <p>今天是她的生日，桌上的蛋糕是她捡垃圾换的钱买的，很好吃。</p >
            <p>她的笑容仿佛是在给父母扇巴掌，让他们愤怒至极。</p >
            <p>或许是因为她捡垃圾的事情被父母知晓，或许是看见她的蛋糕就不是很愉悦，又或者只是单纯的泄愤，她不知道。</p >
            <p>光打还不足以褪去他们的怒火，看着桌上的蛋糕，直接拿起来塞进她的嘴里。</p >
            <p>嘴里充满甜腻腻的奶油味，她却只觉得苦涩眼看她快要昏迷过去，他们这才停了手，把棍棒扔在一旁，锁上了杂物间的门。</p >
            <p>她剧烈的咳嗽着，拿起桌子上的水开始猛喝。</p >
            <p>她也没有再难过，仿佛已经习惯了这一切，捡起地上的蛋糕残渣，依旧祝自己生日快乐。</p >
            <p>杂物间的灯被他们临走的时候关上了，她爬在地上摸索着，小心翼翼的不触碰到任何东西。因为被锁过很多次，早就摸清了路线，很快就找到了开关，就在门旁边。</p >
            <p>她贴着门试图听听他们还在不在，却听到：“她？到处捡垃圾给我丢面子，还想吃蛋糕？真是做梦“真是的，平时还是给她太多了，居然敢败坏我好父亲的名声，这顿打该她挨。”</p >
            <p>“你也是，怎么不看着你女儿。”</p >
            <p>“这死丫头才不是我女儿，我没这样的女儿。”一男一女的声音渐渐远去，她还是没忍住哭了出来。</p>
            <p>平日里饭也不给多吃，多吃一点就要挨打，生日了还是这样。</P >
            <p>以前她不懂，以为真惹父母生气了，每次都乖乖的也能挨打。</p >
            <p>现在亲耳听到否认的话，她还是会伤心。</p >
            <p>如果有的选，她就不会变成这样。</p >
            <p>罢了，她缓缓闭上双眼，以后怎样与她已经无关了。</p >
            <p>金蓝色的光在她的身边闪烁着，她身上的伤逐渐恢复。她自小就这样，也难怪被怪胎</p >
        `
    },
    'xun-extra-2': {
        title: '2.方术笔记',
        content: `
            <h3>2.方术笔记</h3>
            <p>她沉默良久，再抬起头时，看向他的眼神不再有多余的情感</p >
            <p>"我答应你，希望你能兑现承诺。”她笑了起来，离为她附上世界碎屑，她的发尾恢复了白色渐变。</p >
            <p>或许是因为世界边缘本就是属于她的地方，她的视力也一同恢复。</p >
            <p>她漂亮的眼睛闪烁着悲伤，记忆被染上了朦胧，她已经开始忘记了。</p >
            <p>“好快啊。其实我还想多记住你一会儿的。”她笑了笑，伸手想要触摸他，却在快要接触到他的时候缩了一下。离抓住了她的手，任由她抚摸自己的脸颊。</p >
            <p>“还有五个边缘时，我们可以再多待一会儿。”离拂去了她脸上的泪水，温柔的看着她。</p >
            <p>她没说话，只是像在IA506世界里，他们最后分开的姿势，轻轻的靠在他的肩膀上。</p >
            <p>“事实上，就算我们有很多时间，我也累了。”她叹了口气，不再言语。</p >
            <p>离也没有说话，只是像以前一样，温柔的注视着她。</p >
            <p>“我真是，一点都舍不得你这温柔的眼神啊。仅存的温柔，为了我自己的温柔，只对我的温柔，真是奢望啊。为什么连你都是抱有目的的呢？算了，无条件的爱，果然不可能。”她叹了口气，眼泪早就流干了，哭不出来了。</p >
            <p>“我只是，送你回家而已，也只是为了送你回家。”离怜爱的摸了摸她的脸。</p >
            <p></p >
            <p></p >
            <p></p >
            <p></p >
            <p></p >
            <p>笔记中记载了许多奇异的符号和咒语，有些甚至让珣感到不安。</极p>
        `
    },
    'xun-short-1': {
        title: '《蓝蝶之梦》',
        content: `
            <h3>《蓝蝶之梦》</h3>
            <p>那只蓝蝴蝶总是在珣即将醒来时出现，翅膀上闪烁着奇异的光芒...</p >
        `
    },
    'xun-short-2': {
        title: '《镜中花》',
        content: `
            <h3>《镜中花》</h3>
            <p>那面古镜是珣在古董市场偶然发现的...</p >
        `
    },
    'xun-scene-1': {
        title: '梦境茶会',
        content: `
            <h3>梦境茶会</h3>
            <p>茶壶自动倾斜，为珣倒出一杯冒着七彩雾气的茶...</p >
        `
    },
    'xun-scene-2': {
        title: '夜话方术',
        content: `
            <h3>夜话方术</h3>
            <p>油灯在桌上投下摇曳的光影，珣和老者相对而坐...</p >
        `
    },
    // 其他角色的故事数据...
};

// 初始化
document.addEventListener('DOMContentLoaded', function() {
    // 角色切换
    const characterBtns = document.querySelectorAll('.character-btn');
    characterBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            // 更新按钮状态
            characterBtns.forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            
            // 切换内容
            const characterId = this.dataset.character;
            document.querySelectorAll('.character-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${characterId}-content`).classList.add('active');
        });
    });
    
    // 故事卡片点击事件
    const storyCards = document.querySelectorAll('.story-card, .extra-card, .short-card, .scene-card');
    storyCards.forEach(card => {
        card.addEventListener('click', function() {
            const storyId = this.dataset.story;
            openReader(storyId);
        });
    });
    
    // 关闭阅读器
    document.getElementById('closeReader').addEventListener('click', closeReader);
    
    // 点击模态框背景关闭
    document.getElementById('readerModal').addEventListener('click', function(e) {
        if (e.target === this) {
            closeReader();
        }
    });
});

// 打开阅读器
function openReader(storyId) {
    const story = storiesData[storyId];
    if (!story) return;
    
    document.getElementById('readerTitle').textContent = story.title;
    document.getElementById('readerContent').innerHTML = story.content;
    document.getElementById('readerModal').style.display = 'block';
}

// 关闭阅读器
function closeReader() {
    document.getElementById('readerModal').style.display = 'none';
}